<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Translate variables â€¢ labelmachine</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Translate variables">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">labelmachine</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/labelmachine.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/alter_dictionaries.html">Altering lama-dictionaries</a>
    </li>
    <li>
      <a href="../articles/create_dictionaries.html">Creating lama-dictionaries</a>
    </li>
    <li>
      <a href="../articles/translate.html">Translate variables</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/a-maldet/labelmachine">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Translate variables</h1>
                        <h4 class="author">Adrian Maldet</h4>
            
            <h4 class="date">2019-09-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/a-maldet/labelmachine/blob/master/vignettes/translate.Rmd"><code>vignettes/translate.Rmd</code></a></small>
      <div class="hidden name"><code>translate.Rmd</code></div>

    </div>

    
    
<p>In the following, we will explain how to use a lama-dictionary (See <a href="https://a-maldet.github.io/labelmachine/articles/create_dictionaries.html">Creating lama-dictionaries</a>) in order to translate data frame variables or atomic vectors (or factor objects). The main functions are: * <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code> and <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_()</a></code>: Assign new labels to variable values and turn them into ordered factors (if <code>to_factor = TRUE</code>). * <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_translate_all()</a></code>: Apply <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code> on all possible columns of a data frame, if there are corresponding translations. * <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor()</a></code> and <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor_()</a></code>: Similar to <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code> and <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_()</a></code>, but the variables already have the right values (character or factor), but should be turned into factor variables with the factor levels given in the corresponding translations. * <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_to_factor_all()</a></code>: Apply <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor()</a></code> on all possible columns of a data frame, if there are corresponding translations.</p>
<div id="the-example-data-frame-and-lama-dictionary" class="section level2">
<h2 class="hasAnchor">
<a href="#the-example-data-frame-and-lama-dictionary" class="anchor"></a>The example data frame and lama-dictionary</h2>
<p>Let <code>df</code> be a data frame with the following structure:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="dt">pupil_id =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">each =</span> <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="dt">subject =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"eng"</span>, <span class="st">"mat"</span>, <span class="st">"gym"</span>), <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="dt">level =</span> <span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>),</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    <span class="dt">levels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"b"</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  ),</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  <span class="dt">result =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">df</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;    pupil_id subject level result</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; 1         1     eng     a      1</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; 2         1     mat     a      2</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; 3         1     gym     a      2</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt; 4         2     eng     b     NA</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; 5         2     mat     b      2</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt; 6         2     gym     b     NA</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; 7         3     eng     b      1</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; 8         3     mat     b      0</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; 9         3     gym     b      1</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt; 10        4     eng     a      2</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt; 11        4     mat     a      3</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; 12        4     gym     a     NA</span></a></code></pre></div>
<p>The column <code>subject</code> (<strong>character</strong>) contains the subject codes and the column <code>level</code> (<strong>factor</strong>) holds the level of the courses (<code>basic</code> and <code>advanced</code>) pupils were tested in. The column <code>result</code> (<strong>integer</strong>) contains the test results (<code>1</code> and <code>2</code> are positive, <code>3</code> and <code>4</code> are negative, <code>NA</code> means that the pupil missed the test and <code>0</code> means that something else went wrong).</p>
<p>We want to use the following lama-dictionary in order to translate the data frame variables:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(labelmachine)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">dict &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/new_lama_dictionary.html">new_lama_dictionary</a></span>(</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="dt">sub =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">eng =</span> <span class="st">"English"</span>, <span class="dt">mat =</span> <span class="st">"Mathematics"</span>, <span class="dt">gym =</span> <span class="st">"Gymnastics"</span>),</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="dt">lev =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">b =</span> <span class="st">"Basic"</span>, <span class="dt">a =</span> <span class="st">"Advanced"</span>),</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="dt">result =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    <span class="st">"1"</span> =<span class="st"> "Good"</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="st">"2"</span> =<span class="st"> "Passed"</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="st">"3"</span> =<span class="st"> "Not passed"</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="st">"4"</span> =<span class="st"> "Not passed"</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="dt">NA_ =</span> <span class="st">"Missed"</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    <span class="st">"0"</span> =<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">)</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">dict</a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; --- lama_dictionary ---</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; Variable 'sub':</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;           eng           mat           gym </span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;     "English" "Mathematics"  "Gymnastics" </span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; Variable 'lev':</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt;          b          a </span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt;    "Basic" "Advanced" </span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; Variable 'result':</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt;            1            2            3            4          NA_ </span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt;       "Good"     "Passed" "Not passed" "Not passed"     "Missed" </span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt;            0 </span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt;           NA</span></a></code></pre></div>
</div>
<div id="translate-using-non-standard-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#translate-using-non-standard-evaluation" class="anchor"></a>Translate using non-standard evaluation</h2>
<p>The function <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code> uses non-standard evaluation, which means that we pass in expressions, which will be parsed and we can spare the quotes surrounding column and translation names:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">df_new &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="dt">.data =</span> df,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="dt">dictionary =</span> dict,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="dt">subject_new =</span> <span class="kw"><a href="https://rdrr.io/r/base/grep.html">sub</a></span>(subject),</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  <span class="dt">level =</span> <span class="kw">lev</span>(level),</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="dt">result =</span> <span class="kw">result</span>(result),</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  <span class="dt">keep_order =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  <span class="dt">to_factor =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_new)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; 'data.frame':    12 obs. of  5 variables:</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  $ pupil_id   : int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  $ subject    : chr  "eng" "mat" "gym" "eng" ...</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  $ level      : Factor w/ 2 levels "Advanced","Basic": 1 1 1 2 2 2 2 2 2 1 ...</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  $ result     : chr  "Good" "Passed" "Passed" "Missed" ...</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  $ subject_new: Factor w/ 3 levels "English","Mathematics",..: 1 2 3 1 2 3 1 2 3 1 ...</span></a></code></pre></div>
<p>The arguments <code>.data</code> and <code>dictionary</code> define which data frame should be translated and which lama-dictionary should be used for the translation. The argument <code>keep_order</code> defines for each given translation if the original ordering of the variable should be kept (ordering of the variable in the data frame <code>df</code>) or if the ordering given in the translation should be used. The argument <code>to_factor</code> defines for each translation, if the resulting labeled variable should be a factor variable (<code>to_factor = TRUE</code>) or a plain character variable (<code>to_factor = FALSE</code>). Besides the arguments <code>.data</code>, <code>dictionary</code> and <code>keep_order</code> all other arguments are label assignments. The names of the arguments (left hand side of the equations) define the column names under which the labeled variable should be stored. The right hand side of the assignments define the column which should be labeled (parameter name in the brackets) and which translation should be used (function name the left of the brackets). Hence, the statement above does the following things:</p>
<ul>
<li>
<code>subject_new = sub(subject)</code>: The column <code>subject</code> in the data frame <code>df</code> is translated using the translation <code>sub</code> and the resulting factor is stored under the column name <code>subject_new</code>. Since the first entry in <code>keep_order</code> is <code>FALSE</code>, the ordering given in the translation <code>sub</code> is used for the labels. Since the first entry in <code>to_factor</code> is <code>TRUE</code> the resulting variable is a factor variable.</li>
<li>
<code>level = lev(level)</code>: The column <code>level</code> in the data frame <code>df</code> is translated using the translation <code>lev</code> and then overwritten by the resulting factor. Since the second entry in <code>keep_order</code> is <code>TRUE</code>, the labeled variable has the same ordering as the original column. Since the second entry in <code>to_factor</code> is <code>TRUE</code> the resulting variable is a factor variable.</li>
<li>
<code>result = result(result)</code>: The column <code>result</code> in the data frame <code>df</code> is translated using the translation <code>result</code> and then overwritten by the resulting factor. Since the third entry in <code>keep_order</code> is <code>FALSE</code>, the ordering given in the translation is used for the labels. Since the third entry in <code>to_factor</code> is <code>FALSE</code> the resulting variable is a plain character variable.</li>
</ul>
<p>There are several abbreviations, in order to spare some writing:</p>
<ul>
<li>If the translation has the same name as the original column name, then it is sufficient to just write the translation name on the right hand side. E.g: <code>result_new = result</code> is the same as <code>result_new = result(result)</code>.</li>
<li>If the column name under which the labeled variable should be stored is the same as the original column name, then the left hand side of the assignment can be omitted. E.g: <code>lev(level)</code> is the same as <code>level = lev(level)</code>.</li>
<li>If the names of the translation, of the original column and the new column are equal then only the name of the translation is needed. E.g: <code>result</code> is the same as <code>result = result(result)</code>.</li>
</ul>
</div>
<div id="translate-using-standard-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#translate-using-standard-evaluation" class="anchor"></a>Translate using standard evaluation</h2>
<p>The function <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_()</a></code> is the standard evaluation variant of <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>, which means that instead of expressions, we pass in character strings holding the names of the translations and columns we want to use:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">df_new &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_</a></span>(</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="dt">.data =</span> df,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="dt">dictionary =</span> dict,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  <span class="dt">translation =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"sub"</span>, <span class="st">"lev"</span>, <span class="st">"result"</span>),</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"subject"</span>, <span class="st">"level"</span>, <span class="st">"result"</span>),</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="dt">col_new =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"subject_new"</span>, <span class="st">"level"</span>, <span class="st">"result"</span>),</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  <span class="dt">keep_order =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  <span class="dt">to_factor =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_new)</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; 'data.frame':    12 obs. of  5 variables:</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;  $ pupil_id   : int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  $ subject    : chr  "eng" "mat" "gym" "eng" ...</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  $ level      : Factor w/ 2 levels "Advanced","Basic": 1 1 1 2 2 2 2 2 2 1 ...</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;  $ result     : chr  "Good" "Passed" "Passed" "Missed" ...</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt;  $ subject_new: Factor w/ 3 levels "English","Mathematics",..: 1 2 3 1 2 3 1 2 3 1 ...</span></a></code></pre></div>
<p>The arguments <code>.data</code> and <code>dictionary</code> define which data frame should be translated and which lama-dictionary should be used for the translation. The argument <code>keep_order</code> defines for each given translation if the original ordering of the variable should be kept (ordering of the variable in the data frame <code>df</code>) or if the ordering given in the translation should be used. The result is the same as before, when we used <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>.</p>
</div>
<div id="translate-all-possible-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#translate-all-possible-variables" class="anchor"></a>Translate all possible variables</h2>
<p>The function <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_translate_all()</a></code> is an extension of <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>, which tries to automatically translate as many columns in the data frame <code>.data</code> as possible. Therefore, the names of the columns which should be translated must match the names of the translations which should be used:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">df_new &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_translate_all</a></span>(</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="dt">.data =</span> df,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="dt">dictionary =</span> dict,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="dt">prefix =</span> <span class="st">"new_"</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">  <span class="dt">fn_colname =</span> toupper,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  <span class="dt">suffix =</span> <span class="st">"_labeled"</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  <span class="dt">keep_order =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_new)</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 'data.frame':    12 obs. of  5 variables:</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;  $ pupil_id          : int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;  $ subject           : chr  "eng" "mat" "gym" "eng" ...</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;  $ level             : Factor w/ 2 levels "a","b": 1 1 1 2 2 2 2 2 2 1 ...</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;  $ result            : num  1 2 2 NA 2 NA 1 0 1 2 ...</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt;  $ new_RESULT_labeled: Factor w/ 4 levels "Good","Passed",..: 1 2 2 4 2 4 1 NA 1 2 ...</span></a></code></pre></div>
<p>In the above example, only the column name <code>result</code> matches the translation name and is therefore translated and stored under the column name <code>new_RESULT_labeled</code>. The name of the new columns is a transformation of the old column name (e.g. <code>result</code>), appending the strings given in the arguments <code>prefix</code> and <code>suffix</code> at the beginning and at the end of the column name. Before this string concatenation, the name of the original column can be transformed into a other string by using the string transformation function <code>fn_colname</code>. In our case <code>fn_colname</code> is given the function <code>toupper</code> which transforms all letters of the column name <code>result</code> to upper case <code>RESULT</code>. Contrary to <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>, the argument <code>keep_order</code> is just a single boolean flag. It defines whether the original order of all columns should be kept (<code>keep_order = TRUE</code>) or if the order in the translation vector should be used. Like in the case of <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>, it is possible to pass an argument <code>to_factor = FALSE</code> <code>lama_translate_all</code> in order to define that all resulting labeled variables shall be stored as plain character vectors.</p>
</div>
<div id="translate-vectors" class="section level2">
<h2 class="hasAnchor">
<a href="#translate-vectors" class="anchor"></a>Translate vectors</h2>
<p>So far, we only translated variables in data frames, but it is also possible to use <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code> and <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_()</a></code> in order to translate atomic vectors (character, logical, numeric) and factors.</p>
<p>Using <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"eng"</span>, <span class="st">"eng"</span>, <span class="st">"gym"</span>, <span class="st">"mat"</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">vec_labeled &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate</a></span>(vec, dict, sub)</a></code></pre></div>
<p>Using <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">vec_labeled &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate_</a></span>(vec, dict, <span class="st">"sub"</span>)</a></code></pre></div>
</div>
<div id="turn-labeled-variables-into-factors" class="section level2">
<h2 class="hasAnchor">
<a href="#turn-labeled-variables-into-factors" class="anchor"></a>Turn labeled variables into factors</h2>
<p>Sometimes, you already have labeled variables (character or factor variables, maybe produced by <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code> with argument <code>to_factor = FALSE</code>) and you want to turn them into factor variables with a desired ordering. In this case the functions <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor()</a></code>, <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor_()</a></code> <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_to_factor_all()</a></code> are right choices.</p>
<p>Let <code>df_non_factor</code> a data frame holding the right labels, but no factor variables (created with <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_translate_all()</a></code> using <code>to_factor = FALSE</code>):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">dict_new &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_rename.html">lama_rename</a></span>(dict, <span class="dt">subject =</span> sub, <span class="dt">level =</span> lev)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">df_non_factor &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_translate_all</a></span>(df, dict_new, <span class="dt">to_factor =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_non_factor)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; 'data.frame':    12 obs. of  4 variables:</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;  $ pupil_id: int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;  $ subject : chr  "English" "Mathematics" "Gymnastics" "English" ...</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;  $ level   : chr  "Advanced" "Advanced" "Advanced" "Basic" ...</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;  $ result  : chr  "Good" "Passed" "Passed" "Missed" ...</span></a></code></pre></div>
<p>Turning variables into factors with <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">df_factor &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor</a></span>(</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  <span class="dt">.data =</span> df_non_factor,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  <span class="dt">dictionary =</span> dict,</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">  <span class="dt">subject_new =</span> <span class="kw"><a href="https://rdrr.io/r/base/grep.html">sub</a></span>(subject),</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">  <span class="dt">level =</span> <span class="kw">lev</span>(level),</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  <span class="dt">result =</span> <span class="kw">result</span>(result)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_factor)</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; 'data.frame':    12 obs. of  5 variables:</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;  $ pupil_id   : int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt;  $ subject    : chr  "English" "Mathematics" "Gymnastics" "English" ...</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt;  $ level      : Factor w/ 2 levels "Basic","Advanced": 2 2 2 1 1 1 1 1 1 2 ...</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt;  $ result     : Factor w/ 4 levels "Good","Passed",..: 1 2 2 4 2 4 1 NA 1 2 ...</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt;  $ subject_new: Factor w/ 3 levels "English","Mathematics",..: 1 2 3 1 2 3 1 2 3 1 ...</span></a></code></pre></div>
<p>The function <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor()</a></code> allows the same abbreviations as <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>. It can also be used on factor variables and there is also a <code>keep_order</code> argument like in the case of <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>. Furthermore, the functions <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor()</a></code> and <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor_()</a></code> can both be applied to atomic vectors or plain factors like in the case of <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_translate()</a></code>.</p>
<p>Turning variables in a data frame into factors with <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor_()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">df_factor &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate.html">lama_to_factor_</a></span>(</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  <span class="dt">.data =</span> df_non_factor,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  <span class="dt">dictionary =</span> dict,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  <span class="dt">translation =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"sub"</span>, <span class="st">"lev"</span>, <span class="st">"result"</span>),</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  <span class="dt">col =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"subject"</span>, <span class="st">"level"</span>, <span class="st">"result"</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_factor)</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; 'data.frame':    12 obs. of  4 variables:</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;  $ pupil_id: int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  $ subject : Factor w/ 3 levels "English","Mathematics",..: 1 2 3 1 2 3 1 2 3 1 ...</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  $ level   : Factor w/ 2 levels "Basic","Advanced": 2 2 2 1 1 1 1 1 1 2 ...</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  $ result  : Factor w/ 4 levels "Good","Passed",..: 1 2 2 4 2 4 1 NA 1 2 ...</span></a></code></pre></div>
<p>Since the argument <code>col_new</code> was omitted, the variable names (<code>subject</code>, <code>level</code> and <code>result</code>) were overwritten.</p>
<p>Turning all possible variables in a data frame into factors with <code><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_to_factor_all()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">df_factor &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/labelmachine/man/lama_translate_all.html">lama_to_factor_all</a></span>(</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  <span class="dt">.data =</span> df_non_factor,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">  <span class="dt">dictionary =</span> dict</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(df_factor)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; 'data.frame':    12 obs. of  4 variables:</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt;  $ pupil_id: int  1 1 1 2 2 2 3 3 3 4 ...</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;  $ subject : chr  "English" "Mathematics" "Gymnastics" "English" ...</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt;  $ level   : chr  "Advanced" "Advanced" "Advanced" "Basic" ...</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt;  $ result  : Factor w/ 4 levels "Good","Passed",..: 1 2 2 4 2 4 1 NA 1 2 ...</span></a></code></pre></div>
<p>Since the arguments <code>prefix</code>, <code>suffix</code> and <code>fn_colname</code> were omitted, the variable names (<code>subject</code>, <code>level</code> and <code>result</code>) were overwritten.</p>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further reading</h2>
<ul>
<li><a href="https://a-maldet.github.io/labelmachine/articles/create_dictionaries.html">Creating lama-dictionaries</a></li>
<li><a href="https://a-maldet.github.io/labelmachine/articles/alter_dictionaries.html">Altering lama-dictionaries</a></li>
<li><a href="https://a-maldet.github.io/labelmachine/articles/labelmachine.html">Get started</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-example-data-frame-and-lama-dictionary">The example data frame and lama-dictionary</a></li>
      <li><a href="#translate-using-non-standard-evaluation">Translate using non-standard evaluation</a></li>
      <li><a href="#translate-using-standard-evaluation">Translate using standard evaluation</a></li>
      <li><a href="#translate-all-possible-variables">Translate all possible variables</a></li>
      <li><a href="#translate-vectors">Translate vectors</a></li>
      <li><a href="#turn-labeled-variables-into-factors">Turn labeled variables into factors</a></li>
      <li><a href="#further-reading">Further reading</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adrian Maldet.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
